o<g29> sub
#500=40; probe x offset io index
#501=[#500+1]; probe y offset io index
#502=[#500+2]; probe z offset io index
#503=38; probe selection io index
#505=38; probe enable io index
#506=39; probe speed io index
#507=42; probe position io start index
M66 E#500 L0
#510=#5399; probe x offset
M66 E#501 L0
#511=#5399; probe y offset
M66 E#502 L0
#512=#5399; probe z offset
M66 E#507 L0
#514=#5399; probe x
M66 E[#507+1] L0
#515=#5399; probe y
M65 P#505; disable probe sensor if it was enabled
M68 E#503 Q0; select probe
G10 L2 P1 Z0.0;  reset z offset
G0 Z1.0
G0 X[#514-#510] Y[#515-#511]
M64 P#505;         enable probe sensor
G38.2 Z#<_ini[AXIS_2]MIN_LIMIT> F#<_ini[PROBE]SEARCH_VEL>; probe Z axis
M65 P#505;         disable probe sensor
G10 L20 P1 Z#512; set Z offset
G0 Z1.0
G0 X#514 Y#515
o<g29> end sub